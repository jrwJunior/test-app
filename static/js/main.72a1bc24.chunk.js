(this.webpackJsonpyourmodule=this.webpackJsonpyourmodule||[]).push([[0],{270:function(e,t,a){},274:function(e,t,a){},275:function(e,t,a){},276:function(e,t,a){},286:function(e,t,a){},287:function(e,t,a){},288:function(e,t,a){},290:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(18),s=a.n(r),i=a(42),o=a(326),l=a(20),j=a(136),u=a(16),d=a(17),b=new(function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,[{key:"getUser",value:function(){return JSON.parse(sessionStorage.getItem("user"))}},{key:"setUser",value:function(e){sessionStorage.setItem("user",JSON.stringify(e))}},{key:"getIsAuthSession",value:function(){if(JSON.parse(sessionStorage.getItem("user"))instanceof Object)return!0}},{key:"deleteUserSession",value:function(){sessionStorage.remove("user")}}]),e}()),h=Object(j.a)({isAuth:!!b.getIsAuthSession(),user:b.getUser(),channel:{},messages:[]}),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return e=(e=e.set("user",t.payload)).set("isAuth",!0);case"LOGOUT":return e=(e=(e=(e=e.set("isAuth",!1)).set("user",null)).set("channel",{})).set("messages",[]);case"CHANGE_USER":return e=e.set("user",t.payload);case"SET_CHENNEL":return e=e.set("channel",t.payload);case"SET_MESSAGES":return e=e.update("messages",(function(e){return e.concat(t.payload)}));default:throw new Error("Unhandled action type: ".concat(t.type))}},O=a(3),f=c.a.createContext(""),v=c.a.createContext(""),x=function(){return c.a.useContext(f)},p=function(){return c.a.useContext(v)},g=function(e){var t=e.children,a=c.a.useReducer(m,h),n=Object(l.a)(a,2),r=n[0],s=n[1];return Object(O.jsx)(f.Provider,{value:r,children:Object(O.jsx)(v.Provider,{value:s,children:t})})},N=a(24),S=a(21),y=a(36),C=a(149),w=a(323),E=a(86),U=a(321),k=a(327),A=a(330),I=a(320),_=a(141),L=a.n(_),T=a(142),F=a.n(T),B=["secure","name","errors"],G=c.a.forwardRef((function(e,t){var a,n=e.secure,r=e.name,s=e.errors,i=Object(E.a)(e,B),o=c.a.useState(n),j=Object(l.a)(o,2),u=j[0],d=j[1],b=null===(a=s[r])||void 0===a?void 0:a.message,h=Object(O.jsx)(A.a,{position:"end",children:Object(O.jsx)(I.a,{"aria-label":"toggle password visibility",onClick:function(){return d((function(e){return!e}))},onMouseDown:function(e){return e.preventDefault()},children:u?Object(O.jsx)(F.a,{}):Object(O.jsx)(L.a,{})})});return Object(O.jsx)(U.a,{className:"form-control",children:Object(O.jsx)(k.a,Object(S.a)(Object(S.a)({error:!!b,ref:t},i),{},{type:u?"password":"text",helperText:b,InputProps:{endAdornment:!!n&&h}}))})}));G.defaultProps={secure:!1};var R=G,q=a(63),P=q.a().shape({email:q.b().required("required field").email("check the correct spelling of the email"),fName:q.b().required("required field"),lName:q.b().required("required field"),password:q.b().required("required field")}),H=(a(270),function(){var e=p(),t=Object(N.g)().push,a=Object(y.e)({mode:"onChange",resolver:Object(C.a)(P)}),n=a.handleSubmit,c=a.control,r=a.formState,s=r.errors,i=r.isValid;return Object(O.jsx)("div",{className:"auth-page",children:Object(O.jsxs)("form",{onSubmit:n((function(a){delete a.password,b.setUser(a),e({type:"LOGIN_SUCCESS",payload:a}),t("/")})),children:[Object(O.jsx)("div",{className:"auth-heading",children:"Sign In"}),Object(O.jsx)(y.a,{name:"fName",defaultValue:"",control:c,render:function(e){var t=e.field;return Object(O.jsx)(R,Object(S.a)(Object(S.a)({},t),{},{label:"First name",name:"fName",errors:s}))}}),Object(O.jsx)(y.a,{name:"lName",defaultValue:"",control:c,render:function(e){var t=e.field;return Object(O.jsx)(R,Object(S.a)(Object(S.a)({},t),{},{label:"Last name",name:"lName",errors:s}))}}),Object(O.jsx)(y.a,{name:"email",defaultValue:"",control:c,render:function(e){var t=e.field;return Object(O.jsx)(R,Object(S.a)(Object(S.a)({},t),{},{label:"Email",name:"email",errors:s}))}}),Object(O.jsx)(y.a,{name:"password",defaultValue:"",control:c,render:function(e){var t=e.field;return Object(O.jsx)(R,Object(S.a)(Object(S.a)({},t),{},{label:"Password",name:"password",errors:s,secure:!0}))}}),Object(O.jsx)(w.a,{variant:"contained",color:"primary",type:"submit",disabled:!i,children:"Sign in"})]})})}),D=a(331),M=a(332),J=(a(274),function(e){var t=e.user,a=p(),n=c.a.useState(null),r=Object(l.a)(n,2),s=r[0],o=r[1],j=Boolean(s),u=j?"simple-popover":void 0;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"actions",children:Object(O.jsx)(I.a,{"aria-describedby":u,color:"default","aria-label":"avatar",component:"span",onClick:function(e){o(e.currentTarget)},children:Object(O.jsx)(M.a,{src:null===t||void 0===t?void 0:t.avatar,alt:"your avatar",children:"".concat(t.fName.charAt(0).toUpperCase()).concat(t.lName.charAt(0).toUpperCase())})})}),Object(O.jsxs)(D.a,{id:u,open:j,anchorEl:s,onClose:function(){return o(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:[Object(O.jsxs)("div",{className:"popover-top",children:[Object(O.jsx)("div",{className:"fullName",children:"".concat(t.fName," ").concat(t.lName)}),Object(O.jsx)("div",{className:"email",children:t.email})]}),Object(O.jsx)("div",{className:"popover-bottom",children:Object(O.jsxs)("div",{className:"popover-content",children:[Object(O.jsx)(i.b,{to:"/profile",className:"item-link",children:"Settings"}),Object(O.jsx)("a",{role:"button",className:"item-link",onClick:function(){a({type:"LOGOUT"}),sessionStorage.removeItem("user")},children:"Logout"})]})})]})]})}),V=a(32),z=a(329),W=a(324),K=a(325),Q=0,X=(a(275),function(){var e=p(),t=c.a.useState(!1),a=Object(l.a)(t,2),n=a[0],r=a[1],s=c.a.useState({title:"",description:""}),i=Object(l.a)(s,2),o=i[0],j=i[1],u=c.a.useState(!1),d=Object(l.a)(u,2),b=d[0],h=d[1],m=Object(N.g)().push,f=function(e){var t=e.target,a=t.value,n=t.name;j((function(e){return Object(S.a)(Object(S.a)({},e),{},Object(V.a)({},n,a))}))};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(w.a,{variant:"contained",color:"primary",onClick:function(){return r(!0)},children:"Create a channel"}),Object(O.jsx)(z.a,{open:n,onClose:function(){return r(!1)},"aria-labelledby":"form-dialog-title",maxWidth:"lg",children:Object(O.jsxs)(W.a,{children:[Object(O.jsx)("h2",{children:"New channel"}),Object(O.jsxs)("div",{className:"dialog-inner",children:[Object(O.jsx)(U.a,{className:"form-control",children:Object(O.jsx)(k.a,{name:"title",value:o.title,label:"Channel title*",variant:"outlined",error:b,onChange:f})}),Object(O.jsx)(U.a,{className:"form-control",children:Object(O.jsx)(k.a,{name:"description",value:o.description,label:"Channel description",variant:"outlined",onChange:f})})]}),Object(O.jsx)(K.a,{children:Object(O.jsx)(w.a,{onClick:function(){if(!Object.values(o).some((function(e){return e})))return h(!0),!1;e({type:"SET_CHENNEL",payload:o}),m("/channel/".concat(function(){return Q+=1,"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uniqueId","-").concat(Q)}())),h(!1)},variant:"contained",color:"secondary",size:"large",children:"Create new channel"})})]})})]})}),Y=(a(276),function(){var e=x();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("header",{className:"header",children:Object(O.jsxs)("div",{className:"header-content",children:[Object(O.jsx)(X,{}),Object(O.jsx)(J,{user:e.get("user")})]})}),Object(O.jsx)("h2",{className:"text-center",children:"Welcome to awesome chat"})]})}),Z=a(70),$=(a(285),a(286),function(){var e=p(),t=x(),a=c.a.useState(""),n=Object(l.a)(a,2),r=n[0],s=n[1],i=c.a.useState(!1),o=Object(l.a)(i,2),j=o[0],u=o[1],d=c.a.useRef(new Z.c({fixedWidth:!0,defaultHeight:100})),b=function(e){var t,a=e.split(" ");return a[0].charAt(0).toUpperCase()+(null===(t=a[1])||void 0===t?void 0:t.charAt(0).toUpperCase())},h=function(){var a={author:"Bot Iriska",message:"Hi how are you ".concat(t.get("user").fName," ").concat(t.get("user").lName,"?"),createdDate:new Date,isBoot:!0};e({type:"SET_MESSAGES",payload:a}),u(!1)};return c.a.useEffect((function(){if(j){var e=setTimeout(h,3500);return function(){return clearTimeout(e)}}}),[j]),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsxs)("div",{className:"head",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"head__title",children:t.get("channel").title}),Object(O.jsx)("div",{className:"head__desc",children:t.get("channel").description})]}),Object(O.jsx)(w.a,{variant:"contained",color:"secondary",onClick:function(){e({type:"LOGOUT"}),sessionStorage.removeItem("user")},children:"Logout"})]}),Object(O.jsx)("div",{className:"bubbles",children:Object(O.jsx)(Z.a,{className:"foo",children:function(e){var a=e.height;return Object(O.jsx)(Z.d,{className:"list",width:800,height:a,rowHeight:d.current.rowHeight,deferredMeasurementCache:d.current,rowCount:t.get("messages").length,rowRenderer:function(e){var a,n=e.key,c=e.index,r=e.style,s=t.get("messages")[c];return Object(O.jsx)(Z.b,{cache:d.current,parent:parent,columnIndex:0,rowIndex:c,children:Object(O.jsxs)("div",{style:r,className:s.isBoot?"bubble":"bubble bubble-me",children:[Object(O.jsx)(M.a,{className:"avatar",src:s.isBoot?"":null===(a=t.get("user"))||void 0===a?void 0:a.avatar,alt:"your avatar",children:b(s.author)}),Object(O.jsx)("div",{className:"bubble-text",children:s.message})]},n)},n)}})}})}),j&&Object(O.jsx)("div",{className:"typing-wrap",children:Object(O.jsxs)("div",{className:"typing",children:[Object(O.jsx)("div",{className:"dot"}),Object(O.jsx)("div",{className:"dot"}),Object(O.jsx)("div",{className:"dot"})]})}),Object(O.jsxs)("div",{className:"channel-editor",children:[Object(O.jsx)("input",{placeholder:"Enter your message ...",value:r,onChange:function(e){var t=e.target.value;s(t)}}),Object(O.jsx)(w.a,{color:"primary",onClick:function(){if(r){var a={author:"".concat(t.get("user").fName," ").concat(t.get("user").lName),message:r,created:new Date,isBoot:!1};e({type:"SET_MESSAGES",payload:a}),u(!0),s("")}},children:"Send"})]})]})}),ee=(a(287),function(){var e=p(),t=x(),a=c.a.useState(t.get("user").avatar||""),n=Object(l.a)(a,2),r=n[0],s=n[1],i=c.a.useState(t.get("user")),o=Object(l.a)(i,2),j=o[0],u=o[1],d=c.a.useRef(null),h=Object(N.g)().goBack,m=function(e){var t=e.target,a=t.value,n=t.name;u((function(e){return Object(S.a)(Object(S.a)({},e),{},Object(V.a)({},n,a))}))};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"profile-header",children:Object(O.jsx)(I.a,{"aria-label":"close",onClick:h,children:Object(O.jsx)("svg",{viewBox:"0 0 11 11",width:15,children:Object(O.jsx)("path",{d:"M6.11 5.594l3.94-3.94a.5.5 0 0 0-.707-.707l-3.94 3.94-3.95-3.95a.5.5 0 1 0-.707.707l3.95 3.95-3.84 3.838a.5.5 0 1 0 .708.707l3.838-3.838 3.829 3.828a.5.5 0 0 0 .707-.707L6.109 5.594z",fillRule:"evenodd","data-fill":"true"})})})}),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("h2",{className:"title",children:"Account settings"}),Object(O.jsxs)("div",{className:"wrapper",children:[Object(O.jsx)("div",{className:"sidebar",children:Object(O.jsxs)("div",{className:"item",children:[Object(O.jsx)("p",{children:"Profile"}),Object(O.jsx)("span",{className:"icon"})]})}),Object(O.jsxs)("div",{className:"content",children:[Object(O.jsxs)("div",{className:"avatar-block",children:[Object(O.jsx)(M.a,{src:r,alt:"your avatar",children:"".concat(j.fName.charAt(0).toUpperCase()).concat(j.lName.charAt(0).toUpperCase())}),Object(O.jsxs)("div",{className:"upload-text",children:[Object(O.jsx)("input",{id:"file_upload",type:"file",hidden:!0,accept:"image/*",ref:d,onChange:function(e){var t=e.target.files;if(null===t||void 0===t?void 0:t.length){!function(e){var t=new FileReader;t.onload=function(e){var t=e.target.result;s(t),u((function(e){return Object(S.a)(Object(S.a)({},e),{},{avatar:t})}))},t.readAsDataURL(e)}(t[0])}}}),Object(O.jsx)("label",{htmlFor:"file_upload",children:"Upload new picture"})]})]}),Object(O.jsxs)("div",{className:"form",children:[Object(O.jsx)(U.a,{className:"form-control",children:Object(O.jsx)(k.a,{name:"fName",value:j.fName,variant:"outlined",onChange:m})}),Object(O.jsx)(U.a,{className:"form-control",children:Object(O.jsx)(k.a,{name:"lName",value:j.lName,variant:"outlined",onChange:m})}),Object(O.jsx)(U.a,{className:"form-control",children:Object(O.jsx)(k.a,{name:"email",value:j.email,variant:"outlined",onChange:m})}),Object(O.jsx)(w.a,{variant:"contained",color:"primary",onClick:function(){e({type:"CHANGE_USER",payload:j}),b.setUser(Object(S.a)(Object(S.a)({},t.get("user")),j)),alert("User changed successfully")},children:"Save changes"})]})]})]})]})]})}),te=["component"],ae=function(e){var t=e.component,a=Object(E.a)(e,te),n=x();return Object(O.jsx)(N.b,Object(S.a)(Object(S.a)({},a),{},{render:function(e){return n.get("isAuth")?Object(O.jsx)(t,Object(S.a)({},e)):Object(O.jsx)(N.a,{to:"/login"})}}))},ne=(a(288),function(){return Object(O.jsxs)(N.d,{children:[Object(O.jsx)(N.b,{path:"/login",component:H,exact:!0}),Object(O.jsx)(ae,{path:"/",component:Y,exact:!0}),Object(O.jsx)(ae,{path:"/channel/:id",component:$}),Object(O.jsx)(ae,{path:"/profile",component:ee})]})}),ce=(a(289),function(e){e&&e instanceof Function&&Promise.resolve().then(a.bind(null,289)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))});s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(g,{children:Object(O.jsxs)(i.a,{children:[Object(O.jsx)(o.a,{}),Object(O.jsx)(ne,{})]})})}),document.getElementById("root")),ce()}},[[290,1,2]]]);
//# sourceMappingURL=main.72a1bc24.chunk.js.map